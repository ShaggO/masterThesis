clc, clear all

setNum = 16;
imNum = 1;
liNum = 0;

peakThresholdDog = 6.5;
peakThresholdHarris = 10^4;
matchCache = 1;
desSave = 1;

%     'vl',{'method','MultiscaleHarris','peakthreshold',peakThresholdHarris}, ...
%    'vl',{'method','dog','peakthreshold',peakThresholdDog,'cache',1}, ...
%  method = methodStruct( ...
%      'vl',{'method','dog','peakthreshold',peakThresholdDog,'cache',1}, ...
%     {'cellhist','cellhist'},...
%     {{...
%     'colour','gray',...
%     'contentType','go',...
%     'magnitudeType','m',...
%     'rescale',1/2,...
%     'gridType','concentric polar',...
%     'gridSize',[12 2],...
%     'gridRadius',10,...
%     'centerFilter','gaussian',...
%     'centerSigma',[1.3 1.3],...
%     'cellFilter','polar gaussian',...
%     'cellSigma',[1 1],...
%     'normType','pixel',...
%     'normSigma',[1.4 1.4],...
%     'binSigma',1.2,...
%     'binCount',12,...
%     'cellNormStrategy',0,...
%     'cache',1},...
%     {...
%     'colour','gray',...
%     'contentType','si',...
%     'magnitudeType','c',...
%     'rescale',1/2,...
%     'gridType','concentric polar',...
%     'gridSize',[12 2],...
%     'gridRadius',10,...
%     'centerFilter','gaussian',...
%     'centerSigma',[1.3 1.3],...
%     'cellFilter','polar gaussian',...
%     'cellSigma',[1 1],...
%     'normType','pixel',...
%     'normSigma',[1.4 1.4],...
%     'binSigma',1.2,...
%     'binCount',12,...
%     'cellNormStrategy',0,...
%     'cache',1}},...
%     matchCache,{'co-'});

method = methodStruct( ...
    'vl',{'method','dog','peakthreshold',peakThresholdDog,'cache',1}, ...
   'cellhist',{...
   'colour','gray',...
   'contentType','si',...
   'magnitudeType','c',...
   'rescale',1/2,...
   'gridType','concentric polar',...
   'gridSize',[12 2],...
   'gridRadius',13.5,...
   'centerFilter','gaussian',...
   'centerSigma',[2 2],...
   'cellFilter','polar gaussian',...
   'cellSigma',[1.1 1.1],...
   'normType','pixel',...
   'normSigma',[2.6 2.6],...
   'binSigma',2,...
   'binCount',8,...
   'cellNormStrategy',0,...
   'binStrategy',0},...
   0,{'co-'});

% method = methodStruct( ...
%     '',{'cache',1},...
%     'full-sift',{'PeakThresh',peakThresholdDog,'cache',0},...
%     0,{'co-'});

%method = methodStruct( ...
%    'vl',{'method','dog','peakthreshold',peakThresholdDog,'cache',0},...
%    'sift',{'cache',0},...
%    0,{'co-'});

t = 0.9;

[mFunc, mName] = parseMethod(method);
tic
profile on
match = imageCorrespondence(setNum,imNum,liNum,{mFunc},{mName},...
    method.cache,desSave);
profile off
toc
profile viewer
plotAnalyseMatches(match(1),t,mFunc,mName);
